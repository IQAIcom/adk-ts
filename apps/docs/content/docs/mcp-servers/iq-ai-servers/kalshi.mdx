---
title: MCP Kalshi
description: An MCP server for interacting with Kalshi prediction markets
---

import { Callout } from "fumadocs-ui/components/callout";
import { Tabs, Tab } from "fumadocs-ui/components/tabs";

- **Package**: [`@iqai/mcp-kalshi`](https://www.npmjs.com/package/@iqai/mcp-kalshi)
- **Purpose**: Interacting with Kalshi prediction markets for trading and market analysis.

## Usage with ADK TypeScript

<Tabs items={['Simple', 'Verbose', 'Claude Desktop']}>
  <Tab value="Simple">
    ```typescript
    import {McpKalshi} from "@iqai/adk";

    const toolset = McpKalshi({
      env: {
        KALSHI_API_KEY: process.env.KALSHI_API_KEY,
        KALSHI_PRIVATE_KEY_PATH: process.env.KALSHI_PRIVATE_KEY_PATH,
      },
    })

    const tools = await toolset.getTools()
    ```

  </Tab>

  <Tab value="Verbose">
    ```typescript
    import {McpToolset} from "@iqai/adk";

    const toolset = new McpToolset({
      name: "Kalshi MCP Client",
      description: "Client for Kalshi prediction markets",
      transport: {
        mode: "stdio",
        command: "pnpm",
        args: ["dlx", "@iqai/mcp-kalshi"],
        env: {
          KALSHI_API_KEY: process.env.KALSHI_API_KEY,
          KALSHI_PRIVATE_KEY_PATH: process.env.KALSHI_PRIVATE_KEY_PATH,
          PATH: process.env.PATH || "",
        },
      },
    })

    const tools = await toolset.getTools()
    ```

  </Tab>

  <Tab value="Claude Desktop">
    ```json
    {
      "mcpServers": {
        "kalshi-mcp-server": {
          "command": "pnpm",
          "args": ["dlx", "@iqai/mcp-kalshi"],
          "env": {
            "KALSHI_API_KEY": "your_kalshi_api_key",
            "KALSHI_PRIVATE_KEY_PATH": "/path/to/your/private_key.pem"
          }
        }
      }
    }
    ```
  </Tab>
</Tabs>

## Available Tools (15)

### Markets (5)

| Tool                   | Description                                                                                             |
| ---------------------- | ------------------------------------------------------------------------------------------------------- |
| `GET_MARKETS`          | List and discover prediction markets with paginated results including ticker, title, prices, and volume |
| `GET_MARKET`           | Get detailed information about a specific market by its ticker                                          |
| `GET_MARKET_ORDERBOOK` | Get the current orderbook showing bid prices and quantities for Yes and No sides                        |
| `GET_TRADES`           | Get recent public trades across all markets or for a specific market                                    |
| `GET_SERIES`           | Get information about a series (template for recurring events)                                          |

### Portfolio (4)

| Tool              | Description                                                               |
| ----------------- | ------------------------------------------------------------------------- |
| `GET_BALANCE`     | Get current account balance and portfolio value in dollars                |
| `GET_POSITIONS`   | Get current portfolio positions with market exposure, cost basis, and P&L |
| `GET_FILLS`       | Get trade fill history (when orders are matched with other traders)       |
| `GET_SETTLEMENTS` | Get settlement history showing resolved markets and payouts               |

### Orders (6)

| Tool                  | Description                                                              |
| --------------------- | ------------------------------------------------------------------------ |
| `GET_ORDERS`          | Get your orders with optional filtering by market, status, or time range |
| `GET_ORDER`           | Get detailed information about a specific order by ID                    |
| `CREATE_ORDER`        | Create a new order to buy or sell contracts (limit or market order)      |
| `CANCEL_ORDER`        | Cancel an existing open order by ID                                      |
| `BATCH_CANCEL_ORDERS` | Cancel multiple orders at once (up to 20 per batch)                      |
| `DECREASE_ORDER`      | Decrease the quantity of an existing order                               |

## Environment Variables

<Callout type="warn" title="Security">

Private keys are used for trading operations. Handle with care and never
commit them to version control.

</Callout>

- `KALSHI_API_KEY`: Required. Your Kalshi API key ID.
- `KALSHI_PRIVATE_KEY_PATH`: Path to your RSA private key PEM file.
- `KALSHI_PRIVATE_KEY_PEM`: RSA private key as PEM string (alternative to path).

<Callout type="info" title="Authentication">

Provide either `KALSHI_PRIVATE_KEY_PATH` or `KALSHI_PRIVATE_KEY_PEM`, not both.

</Callout>

## Usage Examples

Here's a complete example of using MCP Kalshi with an ADK agent:

```typescript
import { McpKalshi, AgentBuilder } from "@iqai/adk";
import dotenv from "dotenv";

dotenv.config();

async function main() {
  // Initialize Kalshi MCP toolset
  const toolset = McpKalshi({
    env: {
      KALSHI_API_KEY: process.env.KALSHI_API_KEY,
      KALSHI_PRIVATE_KEY_PATH: process.env.KALSHI_PRIVATE_KEY_PATH,
    },
    debug: false,
    retryOptions: {
      maxRetries: 3,
      initialDelay: 500,
    },
  });

  // Get available tools
  const kalshiTools = await toolset.getTools();

  // Create agent with Kalshi tools
  const { runner } = await AgentBuilder.create("kalshi_agent")
    .withModel("gemini-2.5-flash")
    .withDescription("An agent that interacts with Kalshi prediction markets")
    .withTools(...kalshiTools)
    .build();

  try {
    // Example queries
    const response = await runner.ask("Show me available markets on Kalshi");
    console.log(response);
  } finally {
    // Clean up resources
    await toolset.close();
  }
}

main().catch(console.error);
```

## Getting Your Credentials

### API Key

1. Sign up at [Kalshi](https://kalshi.com)
2. Navigate to your account settings
3. Generate an API key

### Private Key

Generate an RSA private key for API authentication. You can provide it either as a file path (`KALSHI_PRIVATE_KEY_PATH`) or as a PEM string (`KALSHI_PRIVATE_KEY_PEM`).

<Callout type="warn" title="Important">

Never share your private key or commit it to version control. Always use
environment variables or secure secret management systems.

</Callout>

## Best Practices

- **Security**: Store API keys and private keys in environment variables, never hardcode them
- **Resource Cleanup**: Always call `await toolset.close()` when done to properly close connections
- **Error Handling**: Implement proper error handling for trading operations
- **Rate Limits**: Be aware of Kalshi API rate limits and implement appropriate retry logic

## Error Handling

<Callout type="warn" title="Error Scenarios">

The server handles various error scenarios gracefully.

</Callout>

üö® **Missing credentials**: Ensure `KALSHI_API_KEY` and a private key are set
üí∏ **Insufficient balance**: Ensure your account has sufficient funds for trading
üîÑ **Invalid market identifiers**: Verify market IDs are correct
üåê **Network issues**: Check your internet connection and Kalshi API status

## Resources

- [Kalshi](https://kalshi.com) - Kalshi prediction market platform
- [Model Context Protocol](https://modelcontextprotocol.io/) - MCP specification and standards
