---
title: MCP ABI
description: Smart contract ABI interactions for Ethereum-compatible blockchains
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';

- **Package**: [`@iqai/mcp-abi`](https://www.npmjs.com/package/@iqai/mcp-abi)
- **Purpose**: Smart contract ABI interactions for Ethereum-compatible blockchains

## Features

- Dynamically generates MCP tools based on contract ABI
- Supports both read (view/pure) and write functions
- Automatic tool naming with contract prefixes
- Compatible with any Ethereum-compatible blockchain
- Comprehensive error handling and transaction management

## Available Tools

The server automatically creates tools for each function in the provided ABI:

- **Read Functions**: Query contract state without transactions
  - Example: `ERC20_BALANCE_OF`, `ERC20_TOTAL_SUPPLY`, `ERC20_NAME`
- **Write Functions**: Execute state-changing transactions
  - Example: `ERC20_TRANSFER`, `ERC20_APPROVE`, `ERC20_MINT`

## Environment Variables

| Variable             | Description                         | Required                             |
| -------------------- | ----------------------------------- | ------------------------------------ |
| `WALLET_PRIVATE_KEY` | Private key for transaction signing | For write functions                  |
| `CONTRACT_ABI`       | JSON string of the contract's ABI   | Yes                                  |
| `CONTRACT_ADDRESS`   | Deployed contract address           | Yes                                  |
| `CONTRACT_NAME`      | Friendly name for tool prefixes     | Optional (defaults to "CONTRACT")    |
| `CHAIN_ID`           | Blockchain network chain ID         | Optional (defaults to Fraxtal - 252) |
| `RPC_URL`            | Custom RPC endpoint URL             | Optional                             |

## Usage with ADK TypeScript

<Tabs items={['Simple', 'Verbose', 'Claude Desktop']}>
  <Tab value="Simple">
    ### Using McpAbi Wrapper

    The simplest way to use MCP ABI with ADK TypeScript:

    ```typescript
    import { McpAbi } from "@iqai/adk";

    // ERC20 contract ABI (simplified example)
    const erc20Abi = [
      {
        "inputs": [{"internalType": "address", "name": "account", "type": "address"}],
        "name": "balanceOf",
        "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {"internalType": "address", "name": "to", "type": "address"},
          {"internalType": "uint256", "name": "amount", "type": "uint256"}
        ],
        "name": "transfer",
        "outputs": [{"internalType": "bool", "name": "", "type": "bool"}],
        "stateMutability": "nonpayable",
        "type": "function"
      }
    ];

    // Create ABI toolset with simplified syntax
    const toolset = McpAbi({
      env: {
        WALLET_PRIVATE_KEY: process.env.WALLET_PRIVATE_KEY,
        CONTRACT_ABI: JSON.stringify(erc20Abi),
        CONTRACT_ADDRESS: "0xaB195B090Cc60C1EFd4d1cEE94Bf441F5931C01b",
        CONTRACT_NAME: "ERC20",
        CHAIN_ID: "252",
        RPC_URL: "https://rpc.frax.com"
      },
      debug: false,
    });

    // Get available tools
    const mcpTools = await toolset.getTools();

    // Now you can use mcpTools with your LlmAgent
    console.log(`Retrieved ${mcpTools.length} ABI tools`);

    // Remember to clean up when done
    // await toolset.close();
    ```
  </Tab>
  
  <Tab value="Verbose">
    ### Using McpToolset Class

    For more control over the MCP configuration:

    ```typescript
    import { McpToolset, type McpConfig } from "@iqai/adk";

    // Configure MCP connection
    const mcpConfig: McpConfig = {
      name: "ABI MCP Client",
      description: "Client for smart contract ABI interactions",
      debug: false,
      retryOptions: {
        maxRetries: 2,
        initialDelay: 200,
      },
      transport: {
        mode: "stdio",
        command: "pnpm",
        args: ["dlx", "@iqai/mcp-abi"],
        env: {
          WALLET_PRIVATE_KEY: process.env.WALLET_PRIVATE_KEY,
          CONTRACT_ABI: process.env.CONTRACT_ABI,
          CONTRACT_ADDRESS: process.env.CONTRACT_ADDRESS,
          CONTRACT_NAME: "ERC20",
          CHAIN_ID: "252",
          RPC_URL: "https://rpc.frax.com",
          PATH: process.env.PATH || "",
        },
      },
    };

    // Initialize toolset
    const toolset = new McpToolset(mcpConfig);

    // Get available tools
    const mcpTools = await toolset.getTools();

    // Now you can use mcpTools with your LlmAgent
    console.log(`Retrieved ${mcpTools.length} ABI tools`);

    // Remember to clean up when done
    // await toolset.close();
    ```
  </Tab>
  
  <Tab value="Claude Desktop">
    ### Claude Desktop Configuration

    Add this to your Claude Desktop `claude_desktop_config.json`:

    ```json
    {
      "mcpServers": {
        "smart-contract-abi": {
          "command": "pnpm",
          "args": ["dlx", "@iqai/mcp-abi"],
          "env": {
            "WALLET_PRIVATE_KEY": "your_wallet_private_key_here",
            "CONTRACT_ABI": "[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]",
            "CONTRACT_ADDRESS": "0xaB195B090Cc60C1EFd4d1cEE94Bf441F5931C01b",
            "CONTRACT_NAME": "ERC20",
            "CHAIN_ID": "252",
            "RPC_URL": "https://rpc.frax.com"
          }
        }
      }
    }
    ```

    Then restart Claude Desktop and you'll have access to contract interaction tools directly in your conversations.

    **Example prompts:**
    - "Check the balance of address 0x123... for this ERC20 token"
    - "Transfer 100 tokens to address 0xabc..."
    - "What's the total supply of this token?"
    - "Approve 1000 tokens for spender 0xdef..."
  </Tab>
</Tabs>

## Usage Examples

### ERC20 Token Contract

- **Check balance**: `ERC20_BALANCE_OF` with address parameter
- **Transfer tokens**: `ERC20_TRANSFER` with recipient and amount
- **Check allowances**: `ERC20_ALLOWANCE` with owner and spender
- **Approve spending**: `ERC20_APPROVE` with spender and amount

### NFT Contract (ERC721)

- **Check ownership**: `NFT_OWNER_OF` with token ID
- **Transfer NFT**: `NFT_TRANSFER_FROM` with from, to, and token ID
- **Mint token**: `NFT_MINT` with recipient and metadata

## Response Examples

**Read Function Response**:
```
‚úÖ Successfully called balanceOf
Result: "1000000000000000000"
```

**Write Function Response**:
```
‚úÖ Successfully executed transfer
Transaction hash: 0x123abc...
You can view this transaction on the blockchain explorer.
```

## Error Handling

<Callout type="warn" title="Common Errors">
The server provides comprehensive error handling for various blockchain interaction scenarios.
</Callout>

- üö® **Invalid function arguments** - "‚ùå Error parsing arguments: [specific error]"
- üîÑ **Transaction failures** - "‚ùå Error with [function]: [error message]"
- üîí **Access control errors** - "‚ùå Error with [function]: execution reverted"
- üåê **Network errors** - "‚ùå Error with [function]: network connection failed"
- üí≤ **Insufficient funds** - "‚ùå Error with [function]: insufficient funds for gas"
- üìÑ **ABI parsing errors** - "‚ùå Invalid ABI format: [specific error]"
- üè† **Contract address errors** - "‚ùå Invalid contract address: [address]"