---
title: MCP Memory
description: Give your agent persistent memory across sessions using a local knowledge graph.
---

import { Tab, Tabs } from "fumadocs-ui/components/tabs";

- **Package**: [`@modelcontextprotocol/server-memory`](https://www.npmjs.com/package/@modelcontextprotocol/server-memory)
- **Provider**: [Anthropic / MCP](https://modelcontextprotocol.io)

## Overview

The Memory MCP server gives your agent a persistent knowledge graph stored locally. It can create entities, define relationships between them, and recall stored facts in future sessions — enabling stateful agents that remember users, context, and prior interactions across conversations.

## Getting Started

Install the package:

```bash
pnpm add @modelcontextprotocol/server-memory
```

Use the server in your agent:

<Tabs items={["Simple", "Verbose", "Claude Desktop"]}>
  <Tab value="Simple">
    ```typescript
    import { McpMemory } from "@iqai/adk";

    const toolset = McpMemory();

    const tools = await toolset.getTools();
    ```

  </Tab>

  <Tab value="Verbose">
    ```typescript
    import { McpToolset } from "@iqai/adk";

    const toolset = new McpToolset({
      name: "Memory MCP Client",
      description: "Client for persistent agent memory via knowledge graph",
      transport: {
        mode: "stdio",
        command: "npx",
        args: ["-y", "@modelcontextprotocol/server-memory"],
      },
    });

    const tools = await toolset.getTools();
    ```

  </Tab>

  <Tab value="Claude Desktop">
    ```json
    {
      "mcpServers": {
        "memory": {
          "command": "npx",
          "args": ["-y", "@modelcontextprotocol/server-memory"]
        }
      }
    }
    ```
  </Tab>
</Tabs>

## Environment Variables

No environment variables are required. The knowledge graph is stored locally in the server's working directory.

## Available Tools

<McpToolsList serverId="memory" />

## Integration Example

```typescript
import { AgentBuilder, McpMemory } from "@iqai/adk";
import * as dotenv from "dotenv";

dotenv.config();

async function main() {
  // Initialize McpMemory toolset
  const toolset = McpMemory();

  // Get available McpMemory tools
  const memoryTools = await toolset.getTools();

  // Create agent with McpMemory tools
  const { runner } = await AgentBuilder.create("memory_agent")
    .withModel("gemini-2.5-flash")
    .withDescription(
      "A personal assistant that remembers your preferences and past interactions",
    )
    .withTools(...memoryTools)
    .build();

  // First session — store a fact
  await runner.ask(
    "Remember that my name is Alex and I prefer concise answers",
  );

  // Later session — recall it
  const response = await runner.ask("What do you know about me?");

  console.log(response);
}

main().catch(console.error);
```

## Further Resources

- [MCP Memory Server on npm](https://www.npmjs.com/package/@modelcontextprotocol/server-memory)
- [Model Context Protocol](https://modelcontextprotocol.io)
