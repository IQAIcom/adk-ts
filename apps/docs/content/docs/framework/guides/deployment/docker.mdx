---
title: Docker
description: Deploy ADK-TS agents using Docker containers
---

import { Callout } from "fumadocs-ui/components/callout";

Docker allows you to package your ADK-TS agent with all its dependencies into a portable container that can run anywhere. **Best for**: Self-hosted deployment, custom infrastructure, and when you need full control over your deployment environment.

## When to Use Docker Direct Deployment

Choose direct Docker deployment when you:

- Need full control over infrastructure and configuration
- Want to self-host on your own servers or VPS
- Require custom networking, volumes, or resource allocation
- Are deploying to multiple environments with complex orchestration
- Need to optimize costs at scale with your own infrastructure

**Not sure?** See the [Platform Comparison](/docs/guides/deployment#platform-comparison) to help decide.

## Before You Begin

<Callout type="info" title="New to Docker?">
  Read the [Docker Fundamentals](/docs/guides/deployment#docker-fundamentals)
  section first to understand core concepts like images, containers, and registries.
</Callout>

This guide assumes you understand:
- Docker images and containers
- Container registries (DockerHub, GitHub, AWS ECR)
- Platform architecture (AMD64 vs ARM64)

## Prerequisites

**General Prerequisites:**
- Built and tested ADK-TS agent locally
- Environment variables documented
- Dependencies defined in `package.json`

**Docker-Specific:**
- **Docker**: Installed and configured - [Get Docker](https://docs.docker.com/get-docker/)
- **Container Registry Account**: DockerHub, GitHub Container Registry, or AWS ECR (for publishing)
- **Hosting Platform**: VPS, dedicated server, or cloud platform that supports Docker

## Deployment Options

You can deploy Docker containers using:

1. **Container Registry + Cloud Platform**: Build locally, push to registry, deploy to cloud
2. **Direct Docker Host**: Deploy to a server running Docker
3. **Docker Compose**: Manage multi-container deployments locally or on a server

## Option 1: Deploy via Container Registry

### Step 1: Create Dockerfile

Use the standard [ADK-TS Dockerfile](/docs/guides/deployment#dockerfile-reference) from the main deployment guide. You can choose between:

- **Basic Dockerfile** - Simple setup for most use cases
- **Multi-Stage Dockerfile** - Optimized for production (smaller images, better security)

Also create a [.dockerignore file](/docs/guides/deployment#dockerignore) to exclude unnecessary files from your build.

### Step 2: Build Docker Image

Build your image for the target platform. See [Platform Architecture](/docs/guides/deployment#platform-architecture) for details on AMD64 vs ARM64.

**For local testing:**

```bash
docker build -t my-adk-agent:latest .
```

**For cloud deployment (Railway, AWS, Google Cloud, etc.):**

```bash
docker buildx build --platform linux/amd64 -t my-adk-agent:latest .
```

### Step 3: Push to Container Registry

Choose ONE registry to store your Docker image. This makes it accessible to cloud platforms.

**Option A: Docker Hub** (Easiest for beginners)

1. Create a free account at [hub.docker.com](https://hub.docker.com)
2. Run these commands (replace `username` with your Docker Hub username):

```bash
# Login to Docker Hub
docker login

# Tag your image with your username
docker tag my-adk-agent:latest username/my-adk-agent:latest

# Upload to Docker Hub
docker push username/my-adk-agent:latest
```

**Option B: GitHub Container Registry** (If you use GitHub)

1. Create a GitHub Personal Access Token with `write:packages` permission
2. Run these commands (replace `USERNAME` and `$GITHUB_TOKEN`):

```bash
# Login to GitHub Container Registry
echo $GITHUB_TOKEN | docker login ghcr.io -u USERNAME --password-stdin

# Tag your image
docker tag my-adk-agent:latest ghcr.io/username/my-adk-agent:latest

# Upload to GitHub
docker push ghcr.io/username/my-adk-agent:latest
```

**Option C: AWS ECR** (If you use AWS)

Requires AWS CLI installed and configured. Replace `region` and `aws_account_id`:

```bash
# Login to AWS ECR
aws ecr get-login-password --region region | docker login --username AWS --password-stdin aws_account_id.dkr.ecr.region.amazonaws.com

# Tag your image
docker tag my-adk-agent:latest aws_account_id.dkr.ecr.region.amazonaws.com/my-adk-agent:latest

# Upload to AWS
docker push aws_account_id.dkr.ecr.region.amazonaws.com/my-adk-agent:latest
```

### Step 4: Deploy to Cloud Platform

Now that your image is in a registry, deploy it to a cloud platform.

**For Railway, Render, or Fly.io:**

1. Go to your platform's dashboard
2. Create a new project/service
3. Select **"Deploy from Docker Image"** or similar option
4. Enter your image name (e.g., `username/my-adk-agent:latest`)
5. Add your environment variables from your project's `.env` file  
6. Click Deploy

The platform will pull your image from the registry and run it.

**For AWS (ECS), Google Cloud (Cloud Run), or Azure (Container Instances):**

1. Navigate to the container service in the cloud console
2. Create a new container instance/service
3. Specify your container registry image URL
4. Configure environment variables, memory, and CPU limits
5. Deploy the service

Each platform has slightly different interfaces, but the core concept is the same: point to your Docker image and configure settings.

## Option 2: Deploy to Docker Host

This option is for deploying directly to your own server (VPS, dedicated server, etc.) instead of using a managed cloud platform.

### Step 1: Prepare Your Server

First, install Docker on your Linux server. SSH into your server and run:

```bash
# For Ubuntu/Debian servers
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
```

For other operating systems, see [Docker's installation guide](https://docs.docker.com/engine/install/).

### Step 2: Deploy Your Container

You have two options for running your container on the server:

**Option A: Pull from Registry**

If you pushed your image to a registry (Step 3 from Option 1):

```bash
# Pull your image from the registry
docker pull username/my-adk-agent:latest

# Run it in the background
docker run -d --restart unless-stopped --name my-adk-agent username/my-adk-agent:latest
```

**Option B: Use Docker Compose**

For easier management, create a `docker-compose.yml` file on your server:

```yaml
version: "3.8"

services:
  agent:
    image: username/my-adk-agent:latest
    container_name: my-adk-agent
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      - ./data:/app/data
    networks:
      - agent-network

networks:
  agent-network:
    driver: bridge
```

Then start your agent:

```bash
docker-compose up -d
```

### Step 3: Configure Environment Variables

See [Environment Variables](/docs/guides/deployment#environment-variables) for security best practices and general setup.

For Docker deployments, you can pass environment variables in several ways:

**Using .env file with Docker Compose** (recommended):

```yaml
# docker-compose.yml
services:
  agent:
    env_file:
      - .env
```

**Using -e flags:**

```bash
docker run -d -e GOOGLE_API_KEY=your_key -e LLM_MODEL=gemini-2.5-flash my-agent
```

**Using --env-file:**

```bash
docker run -d --env-file .env my-agent
```

## Verifying Deployment

After deploying, verify your agent is running correctly.

### Check Container Status

List all running containers to confirm yours is active:

```bash
docker ps
```

You should see your container in the list. If not, check if it exited:

```bash
docker ps -a
```

### View Logs

Check your agent's output to ensure it started properly:

```bash
# See recent logs
docker logs my-agent

# Watch logs in real-time
docker logs -f my-agent
```

### Test Your Agent

Depending on your agent type:

- **Discord bots**: Send a command in your Discord server
- **Telegram bots**: Send a message to your bot
- **API agents**: Make a test HTTP request to your endpoint
- **CLI agents**: Check logs for expected startup messages

## Monitoring and Updates

### Updating Your Deployment

When you have new code changes:

**For registry-based deployments:**

1. Rebuild your image locally with changes
2. Push the new version to your registry
3. On your deployment platform or server, pull the new image and restart:

```bash
docker pull username/my-adk-agent:latest
docker stop my-agent
docker rm my-agent
docker run -d --restart unless-stopped --name my-agent username/my-adk-agent:latest
```

**For Docker Compose:**

```bash
docker-compose pull
docker-compose up -d
```

### Monitoring Container Health

Keep an eye on resource usage to prevent issues:

- View real-time stats: `docker stats my-agent`
- Check detailed configuration: `docker inspect my-agent`
- Review logs regularly for errors

## Advanced Configuration

### Multi-Stage Builds

For production deployments, use the [Multi-Stage Dockerfile](/docs/guides/deployment#multi-stage-dockerfile-advanced) from the main deployment guide. This creates smaller, more secure images by separating build and runtime stages.

### Health Checks

Add a health check to automatically restart failed containers:

```dockerfile
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD node -e "console.log('healthy')" || exit 1
```

### Resource Limits and Persistent Data

When running containers, you can set resource limits and mount volumes for data persistence. See your platform's documentation for specific instructions on configuring these settings through their dashboard or CLI.

## Troubleshooting

See [Common Troubleshooting](/docs/guides/deployment#common-troubleshooting) for general deployment issues (build failures, platform mismatches, environment variables, container startup).

### Docker-Specific Issues

**Registry Push Failures**

- Confirm you're logged in to the registry: `docker login`
- Verify the image name format matches your registry's requirements
- Check you have permission to push to the repository
- Ensure stable internet connection

**Docker Compose Errors**

- Verify `docker-compose.yml` syntax is correct
- Check that referenced files (`.env`, volumes) exist
- Ensure port conflicts don't exist: `docker ps` to check running containers
- Review compose logs: `docker-compose logs`

**Network Issues**

- Check container network configuration: `docker network ls`
- Verify firewall rules allow Docker networking
- Test connectivity between containers: `docker exec my-agent ping other-container`

**Volume/Persistence Issues**

- Verify volume paths exist on host system
- Check volume permissions: containers may need specific user/group access
- Inspect volume: `docker volume inspect volume-name`
- Data may be in anonymous volumes: `docker volume ls`

## Best Practices

See [General Best Practices](/docs/guides/deployment#general-best-practices) for universal deployment guidance (security, version control, monitoring, resource management).

### Docker-Specific Best Practices

**Image Optimization**

- Use Alpine-based images for smaller size
- Implement multi-stage builds for production
- Add a `.dockerignore` file to exclude unnecessary files
- Combine RUN commands to minimize image layers
- Order Dockerfile commands from least to most frequently changing

**Container Management**

- Use restart policies for automatic recovery: `--restart unless-stopped`
- Set resource limits to prevent runaway containers: `--memory 512m --cpus 1.0`
- Implement health checks for automated monitoring
- Use named containers for easier management: `--name my-agent`

**Development Workflow**

- Test images locally before pushing to registry
- Use Docker Compose for local development with multiple services
- Tag images with git commit SHAs for traceability: `my-agent:abc1234`
- Implement CI/CD pipelines for automated builds and pushes

**Production Deployment**

- Never use `latest` tag in production - pin specific versions
- Run containers as non-root user for security
- Use secrets management (Docker secrets, not environment variables for sensitive data)
- Implement log rotation to prevent disk space issues
- Monitor container metrics: CPU, memory, network, disk I/O

## Next Steps

- Deploy your Docker image to [Railway](/docs/guides/deployment/railway) for managed hosting
- Review the [.dockerignore reference](/docs/guides/deployment#dockerignore) for optimizing builds
- Explore container orchestration with Kubernetes (guide coming soon)
- Set up monitoring and alerting for your deployed agents
