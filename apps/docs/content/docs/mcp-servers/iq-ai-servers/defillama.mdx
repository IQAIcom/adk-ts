---
title: MCP DefiLlama
description: Access DeFi protocol TVL, yields, stablecoin data, and market analytics from DefiLlama.
---

import { Tab, Tabs } from "fumadocs-ui/components/tabs";

- **Package**: [`@iqai/defillama-mcp`](https://www.npmjs.com/package/@iqai/defillama-mcp)
- **Provider**: [DefiLlama](https://defillama.com)

## Overview

The DefiLlama MCP server gives your agent access to DeFi market data aggregated by DefiLlama. It covers protocol TVL, yield farming opportunities, stablecoin metrics, token prices, and bridge volumes. No API key is required for basic usage.

## Getting Started

Install the package:

```bash
pnpm add @iqai/defillama-mcp
```

Use the server in your agent:

<Tabs items={["Simple", "Verbose", "Claude Desktop"]}>
  <Tab value="Simple">
    ```typescript
    import { McpDefillama } from "@iqai/adk";

    const toolset = McpDefillama();
    const tools = await toolset.getTools();
    ```

  </Tab>

  <Tab value="Verbose">
    ```typescript
    import { McpToolset } from "@iqai/adk";

    const toolset = new McpToolset({
      name: "Defillama MCP Client",
      description: "Client for DeFi analytics via DefiLlama",
      transport: {
        mode: "stdio",
        command: "npx",
        args: ["-y", "@iqai/defillama-mcp"],
      },
    });

    const tools = await toolset.getTools();
    ```

  </Tab>

  <Tab value="Claude Desktop">
    ```json
    {
      "mcpServers": {
        "defillama-mcp-server": {
          "command": "npx",
          "args": ["-y", "@iqai/defillama-mcp"]
        }
      }
    }
    ```
  </Tab>
</Tabs>

## Environment Variables

No environment variables are required. The following optional variables enable enhanced functionality:

| Variable                       | Required | Description                                                             |
| ------------------------------ | -------- | ----------------------------------------------------------------------- |
| `DEFILLAMA_API_KEY`            | No       | DefiLlama API key for higher rate limits                                |
| `IQ_GATEWAY_URL`               | No       | Custom IQ Gateway URL for enhanced data resolution                      |
| `IQ_GATEWAY_KEY`               | No       | Authentication key for the IQ Gateway                                   |
| `OPENROUTER_API_KEY`           | No       | OpenRouter API key for LLM integration                                  |
| `GOOGLE_GENERATIVE_AI_API_KEY` | No       | Google Generative AI key (alternative to OpenRouter)                    |
| `LLM_MODEL`                    | No       | LLM model name for AI-enhanced queries (default: `openai/gpt-4.1-mini`) |

## Available Tools

<McpToolsList serverId="defillama" />

## Integration Example

```typescript
import { AgentBuilder, McpDefillama } from "@iqai/adk";
import * as dotenv from "dotenv";

dotenv.config();

async function main() {
  // Initialize McpDefillama toolset
  const toolset = McpDefillama();

  // Get available McpDefillama tools
  const defillamaTools = await toolset.getTools();

  // Create agent with McpDefillama tools
  const { runner } = await AgentBuilder.create("defillama_agent")
    .withModel("gemini-2.5-flash")
    .withDescription("A DeFi research agent powered by DefiLlama data")
    .withTools(...defillamaTools)
    .build();

  const response = await runner.ask(
    "What are the top 5 DeFi protocols by TVL right now?",
  );

  console.log(response);
}

main().catch(console.error);
```

## Further Resources

- [`@iqai/defillama-mcp` on npm](https://www.npmjs.com/package/@iqai/defillama-mcp)
- [DefiLlama](https://defillama.com)
- [DefiLlama API Docs](https://defillama.com/docs/api)
