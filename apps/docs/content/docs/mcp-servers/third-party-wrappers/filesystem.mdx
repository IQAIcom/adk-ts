---
title: MCP Filesystem
description: Give your agent secure, sandboxed read and write access to the local filesystem.
---

import { Callout } from "fumadocs-ui/components/callout";
import { Tab, Tabs } from "fumadocs-ui/components/tabs";

- **Package**: [`@modelcontextprotocol/server-filesystem`](https://www.npmjs.com/package/@modelcontextprotocol/server-filesystem)
- **Provider**: [Anthropic / MCP](https://modelcontextprotocol.io)

## Overview

The Filesystem MCP server gives your agent controlled access to read, write, list, and search files on the local filesystem. Access is scoped to one or more directories you specify â€” the agent cannot access paths outside the configured roots, making it safe to use in automated workflows.

<Callout type="warn" title="Scope Your Directories Carefully">
  Only grant access to directories your agent genuinely needs. Avoid pointing it
  at sensitive locations like your home directory or system paths.
</Callout>

## Getting Started

Install the package:

```bash
pnpm add @modelcontextprotocol/server-filesystem
```

Use the server in your agent:

<Tabs items={["Simple", "Verbose", "Claude Desktop"]}>
  <Tab value="Simple">
    ```typescript
    import { McpFilesystem } from "@iqai/adk";

    const toolset = McpFilesystem({
      env: {
        ALLOWED_DIRECTORIES: "/path/to/your/project",
      },
    });

    const tools = await toolset.getTools();
    ```

  </Tab>

  <Tab value="Verbose">
    ```typescript
    import { McpToolset } from "@iqai/adk";

    const toolset = new McpToolset({
      name: "Filesystem MCP Client",
      description: "Client for sandboxed local filesystem access",
      transport: {
        mode: "stdio",
        command: "npx",
        args: ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/your/project"],
      },
    });

    const tools = await toolset.getTools();
    ```

  </Tab>

  <Tab value="Claude Desktop">
    ```json
    {
      "mcpServers": {
        "filesystem": {
          "command": "npx",
          "args": [
            "-y",
            "@modelcontextprotocol/server-filesystem",
            "/path/to/your/project"
          ]
        }
      }
    }
    ```
  </Tab>
</Tabs>

## Environment Variables

| Variable              | Required | Description                                                        |
| --------------------- | -------- | ------------------------------------------------------------------ |
| `ALLOWED_DIRECTORIES` | No       | Comma-separated list of directories the agent is allowed to access |

## Configuration

You can configure allowed directories via the `ALLOWED_DIRECTORIES` env var (comma-separated) or pass them directly as arguments in the Verbose/Claude Desktop configs:

```bash
# Single directory
npx -y @modelcontextprotocol/server-filesystem /home/user/projects

# Multiple directories
npx -y @modelcontextprotocol/server-filesystem /home/user/projects /tmp/workspace
```

## Available Tools

<McpToolsList serverId="filesystem" />

## Integration Example

```typescript
import { AgentBuilder, McpFilesystem } from "@iqai/adk";
import * as dotenv from "dotenv";

dotenv.config();

async function main() {
  // Initialize McpFilesystem toolset
  const toolset = McpFilesystem({
    env: {
      ALLOWED_DIRECTORIES: process.cwd(),
    },
  });

  // Get available McpFilesystem tools
  const filesystemTools = await toolset.getTools();

  // Create agent with McpFilesystem tools
  const { runner } = await AgentBuilder.create("filesystem_agent")
    .withModel("gemini-2.5-flash")
    .withDescription(
      "An agent that can read and write files in the current project directory",
    )
    .withTools(...filesystemTools)
    .build();

  const response = await runner.ask(
    "List all TypeScript files in the src directory and show me the contents of index.ts",
  );

  console.log(response);
}

main().catch(console.error);
```

## Further Resources

- [MCP Filesystem Server on npm](https://www.npmjs.com/package/@modelcontextprotocol/server-filesystem)
- [Model Context Protocol](https://modelcontextprotocol.io)
