---
title: MCP ODOS
description: Interact with decentralized exchanges through ODOS aggregation
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';

- **Package**: [`@iqai/mcp-odos`](https://www.npmjs.com/package/@iqai/mcp-odos)
- **Purpose**: Interact with decentralized exchanges through ODOS aggregation

## Features

- Interact with decentralized exchanges through ODOS aggregation
- Fetch a quote for a swap
- Execute a swap

## Available Tools

### `ODOS_GET_QUOTE`

Fetch a quote for a swap:

- Parameters:
  - `chainId` (number): The chain ID of the DEX
  - `sellToken` (string): The token you want to sell
  - `buyToken` (string): The token you want to buy
  - `sellAmount` (string): The amount of tokens you want to sell

### `ODOS_EXECUTE_SWAP`

Execute a swap:

- Parameters:
  - `chainId` (number): The chain ID of the DEX
  - `sellToken` (string): The token you want to sell
  - `buyToken` (string): The token you want to buy
  - `sellAmount` (string): The amount of tokens you want to sell
  - `quote` (string): The quote from the get-quote service
  - `walletProvider` (string): The wallet provider to use

## Environment Variables

<Callout type="warn" title="Security">
The private key is used for signing transactions. Handle with care.
</Callout>

- `WALLET_PRIVATE_KEY`: Required for executing swaps
- The private key of the wallet to be used for interacting with DEX platforms

## Usage with ADK TypeScript

<Tabs items={['Simple', 'Verbose', 'Claude Desktop']}>
  <Tab value="Simple">
    ### Using McpOdos Wrapper

    The simplest way to use MCP ODOS with ADK TypeScript:

    ```typescript
    import { McpOdos } from "@iqai/adk";

    // Create ODOS toolset with simplified syntax
    const toolset = McpOdos({
      env: {
        WALLET_PRIVATE_KEY: process.env.WALLET_PRIVATE_KEY,
      },
      debug: false,
      retryOptions: {
        maxRetries: 2,
        initialDelay: 200,
      },
    });

    // Get available tools
    const mcpTools = await toolset.getTools();

    // Now you can use mcpTools with your LlmAgent
    console.log(`Retrieved ${mcpTools.length} ODOS tools`);
    ```
  </Tab>
  
  <Tab value="Verbose">
    ### Using McpToolset Class

    For more control over the MCP configuration:

    ```typescript
    import { McpToolset, type McpConfig } from "@iqai/adk";

    // Configure MCP connection
    const mcpConfig: McpConfig = {
      name: "ODOS MCP Client",
      description: "Client for ODOS DEX aggregation",
      debug: false,
      retryOptions: {
        maxRetries: 2,
        initialDelay: 200,
      },
      transport: {
        mode: "stdio",
        command: "pnpm",
        args: ["dlx", "@iqai/mcp-odos"],
        env: {
          WALLET_PRIVATE_KEY: process.env.WALLET_PRIVATE_KEY,
          PATH: process.env.PATH || "",
        },
      },
    };

    // Initialize toolset
    const toolset = new McpToolset(mcpConfig);

    // Get available tools
    const mcpTools = await toolset.getTools();

    // Now you can use mcpTools with your LlmAgent
    console.log(`Retrieved ${mcpTools.length} ODOS tools`);

    // Remember to clean up when done
    // await toolset.close();
    ```
  </Tab>
  
  <Tab value="Claude Desktop">
    ### Claude Desktop Configuration

    Add this to your Claude Desktop `claude_desktop_config.json`:

    ```json
    {
      "mcpServers": {
        "odos-server": {
          "command": "pnpm",
          "args": ["dlx", "@iqai/mcp-odos"],
          "env": {
            "WALLET_PRIVATE_KEY": "your_wallet_private_key_here"
          }
        }
      }
    }
    ```

    Then restart Claude Desktop and you'll have access to ODOS tools directly in your conversations.

    **Example prompts:**
    - "Get me a quote for swapping 1 wfrxEth to FRAX on Fraxtal"
    - "What rate would I get for trading 0.5 ETH to USDC?"
    - "Swap 100 DAI to FXS"
    - "Exchange 0.1 ETH for USDT"
  </Tab>
</Tabs>

## Usage Examples

### `GET_SWAP_QUOTE`

- "Get me a quote for swapping 1 wfrxEth to FRAX on Fraxtal"
- "What rate would I get for trading 0.5 ETH to USDC?"
- "Check current exchange rate between DAI and FXS"

### `EXECUTE_TOKEN_SWAP`

- "Swap 100 DAI to FXS"
- "Exchange 0.1 ETH for USDT"
- "Trade my wfrxEth for FRAX"

## Response Examples

```json
ðŸ’± Quote Details
{
  "inTokens": ["0x..."],
  "outTokens": ["0x..."],
  "inAmounts": ["1000000000000000000"],
  "outAmounts": ["990000000000000000"],
  "pathId": "0x...",
  "gasEstimate": 200000,
  "gasEstimateValue": 0.1,
  "netOutValue": 100,
  "priceImpact": 0.01
}
```

## Error Handling

The server provides detailed error messages to help diagnose issues. Errors typically include a `detail` message, a `traceId` for debugging, and an `errorCode`.

Example Error Response:

```json
{
  "detail": "Failed to fetch quote: invalid fromToken address",
  "traceId": "...",
  "errorCode": "INVALID_ADDRESS"
}
```