---
title: Configuration
description: Agent discovery rules, export requirements, and project layout conventions
icon: Settings
---
import { Callout } from 'fumadocs-ui/components/callout';

## How Agent Discovery Works

The ADK CLI and web UI will automatically discover all agents in your project that are exported in a supported format. This enables you to quickly iterate and chat with any agent, whether via the CLI or the web interface.

### Discovery Rules

- Recursively scans for `agent.ts` and `agent.js` files
- Skips directories: `node_modules`, `.git`, `dist`, `build`, `.next`, `.turbo`, `coverage`, `.vscode`, `.idea`
- Presents an interactive selector when multiple agents are found

### Supported Agent Exports

Each `agent.ts` file should export one of the following:

- An `LlmAgent` instance (default or named export)
- A `BuiltAgent` object (the result of `await AgentBuilder.build()`, recommended for root/supervisor agents that need to be run directly)
- A function (sync or async) returning an `LlmAgent` or `BuiltAgent`

Example:
```typescript
// For sub-agents or workflow agents (most agents):
import { LlmAgent } from "@iqai/adk";

export default new LlmAgent({
	name: "my_sub_agent",
	model: "gemini-2.5-flash",
	instruction: "You are a helpful assistant."
});

// For root/supervisor agents (the entry point for CLI/web UI):
import { AgentBuilder } from "@iqai/adk";

export async function agent() {
	return await AgentBuilder
		.create("my_root_agent")
		.withModel("gemini-2.5-flash")
		.withInstruction("You are a helpful supervisor agent.")
		.build();
}
```

You can organize your agents in folders, e.g.:
```shell
agents/
├── main_agent/
│   ├── agent.ts         # Exports your main/root agent (see below)
│   ├── tools.ts         # (optional) Tools for this agent
│   └── sub_agents/
│       ├── sub_agent1/
│       │   ├── agent.ts     # Exports a sub-agent
│       │   └── tools.ts
│       └── sub_agent2/
│           ├── agent.ts
│           └── tools/
│               └── customTool.ts
```

All such agents will be listed for selection in `adk run` and available in the web UI via `adk web`.

<Callout type="info" title="Agent Export Requirements">
For the CLI and web UI to recognize your agent, make sure to export an `LlmAgent`, `BuiltAgent`, or a function (sync/async) returning one of these from your `agent.ts` file. See the section above for details.
</Callout>
